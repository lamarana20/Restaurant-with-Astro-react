---
import Layout from '../layouts/Layout.astro';
import { menuItems } from '../utils/data.js';

const selectedId = Astro.url.searchParams.get('menuId') || '';
const selectedItem = menuItems.find(item => item.id === Number(selectedId));


---

<Layout>
<main class="max-w-xl mx-auto px-4 py-12">
  <h1 class="text-3xl font-bold mb-6 text-center">Commander chez MLD</h1>

  {selectedItem && (
    <div class="bg-amber-50 p-4 mb-6 rounded-lg border border-amber-200">
      <p class="font-semibold">Menu sélectionné : <span class="text-amber-700">{selectedItem.name}</span></p>
    </div>
  )}

  <form class="space-y-4" >
    <div>
      <label class="block mb-1 font-medium">Nom complet*</label>
      <input name="name" required class="w-full p-3 border rounded-lg">
    </div>

    <div>
      <label class="block mb-1 font-medium">Téléphone*</label>
      <input name="phone" type="tel" required class="w-full p-3 border rounded-lg">
    </div>

    <div>
      <label class="block mb-1 font-medium">Choisissez votre menu*</label>
      <select name="menuId" required class="w-full p-3 border rounded-lg">
        <option value="">-- Sélection --</option>
        {menuItems.map(item => (
          <option value={item.id} selected={item.id === selectedItem?.id}>
            {item.name} - {item.price.toFixed(2)}$
          </option>
        ))}
      </select>
    </div>

    <div>
      <label class="block mb-1 font-medium">Commentaires</label>
      <textarea name="instructions" class="w-full p-3 border rounded-lg" rows="2"></textarea>
    </div>

    <button type="submit" class="w-full bg-amber-600 text-white py-3 rounded-lg font-medium hover:bg-amber-700 transition">
      Valider la commande
    </button>
  </form>
</main>
</Layout>